<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Teste de Conex√£o com Supabase</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2\"></script>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }\n        .header { background: linear-gradient(135deg, #e91e63, #9c27b0); color: white; padding: 20px; text-align: center; border-radius: 12px; margin-bottom: 20px; }\n        .content { max-width: 800px; margin: 0 auto; }\n        .test-section { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }\n        .btn { background: #9c27b0; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 10px 5px; }\n        .btn:hover { background: #7b1fa2; }\n        .result { margin: 15px 0; padding: 15px; border-radius: 8px; }\n        .success { background: #e8f5e8; border: 1px solid #4caf50; color: #2e7d32; }\n        .error { background: #ffebee; border: 1px solid #f44336; color: #c62828; }\n        .info { background: #e3f2fd; border: 1px solid #2196f3; color: #0d47a1; }\n        #console { background: #000; color: #00ff00; padding: 15px; border-radius: 4px; font-family: monospace; height: 300px; overflow-y: auto; margin: 20px 0; }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>üß™ Teste de Conex√£o com Supabase</h1>\n        <div>Diagn√≥stico de comunica√ß√£o com o banco de dados</div>\n    </div>\n\n    <div class=\"content\">\n        <div class=\"test-section\">\n            <h2>Configura√ß√£o do Supabase</h2>\n            <div id=\"config-info\"></div>\n            <button class=\"btn\" onclick=\"testSupabaseConfig()\">Verificar Configura√ß√£o</button>\n        </div>\n\n        <div class=\"test-section\">\n            <h2>Testes de Conex√£o</h2>\n            <button class=\"btn\" onclick=\"testBasicConnection()\">Testar Conex√£o B√°sica</button>\n            <button class=\"btn\" onclick=\"testServicesTable()\">Testar Tabela de Servi√ßos</button>\n            <button class=\"btn\" onclick=\"testReviewsTable()\">Testar Tabela de Avalia√ß√µes</button>\n            <button class=\"btn\" onclick=\"testContactInfo()\">Testar Informa√ß√µes de Contato</button>\n        </div>\n\n        <div class=\"test-section\">\n            <h2>Console de Diagn√≥stico</h2>\n            <div id=\"console\">> Aguardando testes...</div>\n            <button class=\"btn\" onclick=\"clearConsole()\">Limpar Console</button>\n        </div>\n    </div>\n\n    <script>\n        // Configura√ß√£o do Supabase\n        const SUPABASE_URL = 'https://vopekxfyorbuyrvzcshy.supabase.co';\n        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvcGVreGZ5b3JidXlydnpjc2h5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NTkyNjMsImV4cCI6MjA3MzAzNTI2M30.jIQqu4j_0QfPpn67YXHyy760X6Z4wwhuHMj-xK3emP4';\n        \n        let supabaseClient = null;\n        \n        // Fun√ß√£o para logar no console\n        function logToConsole(message, type = 'info') {\n            const consoleElement = document.getElementById('console');\n            const timestamp = new Date().toLocaleTimeString();\n            const typeSymbol = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';\n            const logEntry = document.createElement('div');\n            logEntry.innerHTML = `[${timestamp}] ${typeSymbol} ${message}`;\n            consoleElement.appendChild(logEntry);\n            consoleElement.scrollTop = consoleElement.scrollHeight;\n            \n            // Tamb√©m logar no console real\n            if (type === 'error') {\n                console.error(message);\n            } else if (type === 'success') {\n                console.log(message);\n            } else {\n                console.info(message);\n            }\n        }\n        \n        // Fun√ß√£o para mostrar resultado\n        function showResult(message, isSuccess = true) {\n            const resultDiv = document.createElement('div');\n            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;\n            resultDiv.innerHTML = `${isSuccess ? '‚úÖ' : '‚ùå'} ${message}`;\n            document.querySelector('.content').insertBefore(resultDiv, document.querySelector('.content').lastChild);\n            \n            // Remover resultado ap√≥s 5 segundos\n            setTimeout(() => {\n                if (resultDiv.parentNode) {\n                    resultDiv.parentNode.removeChild(resultDiv);\n                }\n            }, 5000);\n        }\n        \n        // Verificar configura√ß√£o do Supabase\n        function testSupabaseConfig() {\n            logToConsole('Iniciando verifica√ß√£o de configura√ß√£o do Supabase...');\n            \n            try {\n                // Verificar se a URL e chave est√£o definidas\n                if (!SUPABASE_URL || !SUPABASE_KEY) {\n                    logToConsole('‚ùå Configura√ß√£o incompleta: URL ou chave faltando', 'error');\n                    showResult('Configura√ß√£o incompleta: URL ou chave faltando', false);\n                    return;\n                }\n                \n                logToConsole(`‚úÖ URL do Supabase: ${SUPABASE_URL}`);\n                logToConsole('‚úÖ Chave de acesso configurada');\n                \n                // Verificar formato da URL\n                try {\n                    new URL(SUPABASE_URL);\n                    logToConsole('‚úÖ URL v√°lida');\n                } catch (e) {\n                    logToConsole(`‚ùå URL inv√°lida: ${e.message}`, 'error');\n                    showResult(`URL inv√°lida: ${e.message}`, false);\n                    return;\n                }\n                \n                showResult('Configura√ß√£o do Supabase verificada com sucesso');\n            } catch (error) {\n                logToConsole(`‚ùå Erro na verifica√ß√£o: ${error.message}`, 'error');\n                showResult(`Erro na verifica√ß√£o: ${error.message}`, false);\n            }\n        }\n        \n        // Testar conex√£o b√°sica\n        async function testBasicConnection() {\n            logToConsole('Iniciando teste de conex√£o b√°sica com Supabase...');\n            \n            try {\n                // Verificar se o cliente Supabase est√° dispon√≠vel\n                if (typeof supabase === 'undefined') {\n                    logToConsole('‚ùå Cliente Supabase n√£o carregado', 'error');\n                    showResult('Cliente Supabase n√£o carregado', false);\n                    return;\n                }\n                \n                logToConsole('‚úÖ Cliente Supabase dispon√≠vel');\n                \n                // Criar cliente\n                supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);\n                logToConsole('‚úÖ Cliente Supabase criado com sucesso');\n                \n                // Testar conex√£o simples\n                const { data, error } = await supabaseClient\n                    .from('services')\n                    .select('id')\n                    .limit(1);\n                \n                if (error) {\n                    logToConsole(`‚ùå Erro na conex√£o: ${error.message}`, 'error');\n                    showResult(`Erro na conex√£o: ${error.message}`, false);\n                    return;\n                }\n                \n                logToConsole('‚úÖ Conex√£o com Supabase estabelecida com sucesso');\n                logToConsole(`‚úÖ Tabela services acess√≠vel (${data ? data.length : 0} registros encontrados)`);\n                showResult('Conex√£o com Supabase estabelecida com sucesso');\n                \n            } catch (error) {\n                logToConsole(`‚ùå Erro no teste de conex√£o: ${error.message}`, 'error');\n                showResult(`Erro no teste de conex√£o: ${error.message}`, false);\n            }\n        }\n        \n        // Testar tabela de servi√ßos\n        async function testServicesTable() {\n            logToConsole('Iniciando teste da tabela de servi√ßos...');\n            \n            if (!supabaseClient) {\n                logToConsole('‚ùå Cliente Supabase n√£o inicializado. Execute primeiro o teste de conex√£o b√°sica.', 'error');\n                showResult('Cliente Supabase n√£o inicializado', false);\n                return;\n            }\n            \n            try {\n                const { data, error } = await supabaseClient\n                    .from('services')\n                    .select('*')\n                    .limit(5);\n                \n                if (error) {\n                    logToConsole(`‚ùå Erro ao acessar tabela services: ${error.message}`, 'error');\n                    showResult(`Erro ao acessar tabela services: ${error.message}`, false);\n                    return;\n                }\n                \n                logToConsole(`‚úÖ Tabela services acessada com sucesso`);\n                logToConsole(`‚úÖ ${data.length} servi√ßos encontrados`);\n                \n                if (data.length > 0) {\n                    logToConsole(`üìù Primeiro servi√ßo: ${data[0].name || 'Sem nome'} - R$ ${data[0].price || '0'}`);\n                }\n                \n                showResult(`Tabela services acessada com sucesso (${data.length} registros)`);\n                \n            } catch (error) {\n                logToConsole(`‚ùå Erro no teste da tabela services: ${error.message}`, 'error');\n                showResult(`Erro no teste da tabela services: ${error.message}`, false);\n            }\n        }\n        \n        // Testar tabela de avalia√ß√µes\n        async function testReviewsTable() {\n            logToConsole('Iniciando teste da tabela de avalia√ß√µes...');\n            \n            if (!supabaseClient) {\n                logToConsole('‚ùå Cliente Supabase n√£o inicializado. Execute primeiro o teste de conex√£o b√°sica.', 'error');\n                showResult('Cliente Supabase n√£o inicializado', false);\n                return;\n            }\n            \n            try {\n                const { data, error } = await supabaseClient\n                    .from('reviews')\n                    .select('*')\n                    .limit(5);\n                \n                if (error) {\n                    logToConsole(`‚ùå Erro ao acessar tabela reviews: ${error.message}`, 'error');\n                    showResult(`Erro ao acessar tabela reviews: ${error.message}`, false);\n                    return;\n                }\n                \n                logToConsole(`‚úÖ Tabela reviews acessada com sucesso`);\n                logToConsole(`‚úÖ ${data.length} avalia√ß√µes encontradas`);\n                \n                if (data.length > 0) {\n                    logToConsole(`üìù Primeira avalia√ß√£o: ${data[0].name || 'An√¥nimo'} - ${data[0].stars || 0} estrelas`);\n                }\n                \n                showResult(`Tabela reviews acessada com sucesso (${data.length} registros)`);\n                \n            } catch (error) {\n                logToConsole(`‚ùå Erro no teste da tabela reviews: ${error.message}`, 'error');\n                showResult(`Erro no teste da tabela reviews: ${error.message}`, false);\n            }\n        }\n        \n        // Testar informa√ß√µes de contato\n        async function testContactInfo() {\n            logToConsole('Iniciando teste das informa√ß√µes de contato...');\n            \n            if (!supabaseClient) {\n                logToConsole('‚ùå Cliente Supabase n√£o inicializado. Execute primeiro o teste de conex√£o b√°sica.', 'error');\n                showResult('Cliente Supabase n√£o inicializado', false);\n                return;\n            }\n            \n            try {\n                const { data, error } = await supabaseClient\n                    .from('contact_info')\n                    .select('*')\n                    .limit(1);\n                \n                if (error) {\n                    logToConsole(`‚ùå Erro ao acessar tabela contact_info: ${error.message}`, 'error');\n                    showResult(`Erro ao acessar tabela contact_info: ${error.message}`, false);\n                    return;\n                }\n                \n                logToConsole(`‚úÖ Tabela contact_info acessada com sucesso`);\n                \n                if (data && data.length > 0) {\n                    const contact = data[0];\n                    logToConsole(`‚úÖ Informa√ß√µes de contato encontradas`);\n                    if (contact.whatsapp_number) {\n                        logToConsole(`üìù WhatsApp: ${contact.whatsapp_number}`);\n                    }\n                    if (contact.contact_email) {\n                        logToConsole(`üìù Email: ${contact.contact_email}`);\n                    }\n                    showResult('Informa√ß√µes de contato carregadas com sucesso');\n                } else {\n                    logToConsole('‚ÑπÔ∏è Nenhuma informa√ß√£o de contato encontrada');\n                    showResult('Nenhuma informa√ß√£o de contato encontrada');\n                }\n                \n            } catch (error) {\n                logToConsole(`‚ùå Erro no teste das informa√ß√µes de contato: ${error.message}`, 'error');\n                showResult(`Erro no teste das informa√ß√µes de contato: ${error.message}`, false);\n            }\n        }\n        \n        // Limpar console\n        function clearConsole() {\n            document.getElementById('console').innerHTML = '> Console limpo...\\n';\n        }\n        \n        // Inicializa√ß√£o\n        document.addEventListener('DOMContentLoaded', function() {\n            logToConsole('‚úÖ P√°gina de teste do Supabase carregada');\n            logToConsole('‚úÖ Clique nos bot√µes para executar os testes');\n        });\n    </script>\n</body>\n</html>