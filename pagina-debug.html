<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Teste de Funcionalidades</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #9c27b0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .test-button:hover {
            background: #7b1fa2;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
        }
        .error {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
        }
        .info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            color: #0d47a1;
        }
        #console {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üî¨ Debug - Teste de Funcionalidades do Site</h1>
    
    <div class="test-section">
        <h2>Diagn√≥stico Autom√°tico</h2>
        <div id="autoDiagnosis">
            <p>Executando diagn√≥stico autom√°tico...</p>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Testes Manuais</h2>
        <button class="test-button" onclick="testBasicJS()">Testar JavaScript B√°sico</button>
        <button class="test-button" onclick="testButtonClick()">Testar Clique em Bot√£o</button>
        <button class="test-button" onclick="testSupabase()">Testar Conex√£o Supabase</button>
        <button class="test-button" onclick="testDOMElements()">Testar Elementos DOM</button>
        <button class="test-button" onclick="testNavigation()">Testar Navega√ß√£o</button>
        
        <div id="testResults"></div>
    </div>
    
    <div class="test-section">
        <h2>Console de Diagn√≥stico</h2>
        <div id="console">> Iniciando diagn√≥stico...</div>
    </div>

    <script>
        // Fun√ß√£o para logar no console visual
        function logToConsole(message, type = 'info') {
            const consoleElement = document.getElementById('console');
            const timestamp = new Date().toLocaleTimeString();
            const typeSymbol = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `[${timestamp}] ${typeSymbol} ${message}`;
            consoleElement.appendChild(logEntry);
            consoleElement.scrollTop = consoleElement.scrollHeight;
            
            // Tamb√©m logar no console real
            if (type === 'error') {
                console.error(message);
            } else if (type === 'success') {
                console.log(message);
            } else {
                console.info(message);
            }
        }
        
        // Fun√ß√£o para mostrar resultado de teste
        function showTestResult(message, isSuccess = true) {
            const resultsElement = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${isSuccess ? 'success' : 'error'}`;
            resultDiv.innerHTML = `${isSuccess ? '‚úÖ' : '‚ùå'} ${message}`;
            resultsElement.appendChild(resultDiv);
        }
        
        // Testar JavaScript b√°sico
        function testBasicJS() {
            document.getElementById('testResults').innerHTML = '';
            logToConsole('Iniciando teste de JavaScript b√°sico...');
            
            try {
                // Testar opera√ß√µes matem√°ticas simples
                const result = 2 + 2;
                if (result === 4) {
                    logToConsole('Opera√ß√µes matem√°ticas funcionando', 'success');
                    showTestResult('JavaScript b√°sico: Funcionando corretamente', true);
                } else {
                    logToConsole('Problema com opera√ß√µes matem√°ticas', 'error');
                    showTestResult('JavaScript b√°sico: Problema detectado', false);
                }
            } catch (error) {
                logToConsole(`Erro no JavaScript b√°sico: ${error.message}`, 'error');
                showTestResult(`JavaScript b√°sico: Erro - ${error.message}`, false);
            }
        }
        
        // Testar clique em bot√£o
        function testButtonClick() {
            document.getElementById('testResults').innerHTML = '';
            logToConsole('Iniciando teste de clique em bot√£o...');
            
            try {
                // Criar bot√£o de teste
                const testButton = document.createElement('button');
                testButton.textContent = 'Bot√£o de Teste';
                let clickCount = 0;
                
                testButton.onclick = function() {
                    clickCount++;
                    logToConsole(`Clique registrado (${clickCount}x)`, 'success');
                };
                
                document.body.appendChild(testButton);
                
                // Simular clique
                testButton.click();
                
                if (clickCount === 1) {
                    logToConsole('Evento de clique funcionando corretamente', 'success');
                    showTestResult('Evento de clique: Funcionando', true);
                } else {
                    logToConsole('Problema com evento de clique', 'error');
                    showTestResult('Evento de clique: Problema detectado', false);
                }
                
                // Remover bot√£o de teste
                document.body.removeChild(testButton);
            } catch (error) {
                logToConsole(`Erro no teste de clique: ${error.message}`, 'error');
                showTestResult(`Evento de clique: Erro - ${error.message}`, false);
            }
        }
        
        // Testar conex√£o com Supabase
        async function testSupabase() {
            document.getElementById('testResults').innerHTML = '';
            logToConsole('Iniciando teste de conex√£o com Supabase...');
            
            try {
                // Testar se o Supabase est√° carregado
                if (typeof supabase !== 'undefined' && typeof supabase.createClient === 'function') {
                    logToConsole('Cliente Supabase dispon√≠vel', 'success');
                    
                    // Tentar criar cliente
                    const SUPABASE_URL = 'https://vopekxfyorbuyrvzcshy.supabase.co';
                    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvcGVreGZ5b3JidXlydnpjc2h5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NTkyNjMsImV4cCI6MjA3MzAzNTI2M30.jIQqu4j_0QfPpn67YXHyy760X6Z4wwhuHMj-xK3emP4';
                    
                    try {
                        const testClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                        logToConsole('Cliente Supabase criado com sucesso', 'success');
                        
                        // Testar acesso a uma tabela (sem autentica√ß√£o)
                        showTestResult('Supabase: Cliente criado com sucesso', true);
                    } catch (clientError) {
                        logToConsole(`Erro ao criar cliente: ${clientError.message}`, 'error');
                        showTestResult(`Supabase: Erro ao criar cliente - ${clientError.message}`, false);
                    }
                } else {
                    logToConsole('Cliente Supabase N√ÉO dispon√≠vel', 'error');
                    showTestResult('Supabase: Cliente n√£o carregado', false);
                }
            } catch (error) {
                logToConsole(`Erro no teste do Supabase: ${error.message}`, 'error');
                showTestResult(`Supabase: Erro - ${error.message}`, false);
            }
        }
        
        // Testar elementos DOM
        function testDOMElements() {
            document.getElementById('testResults').innerHTML = '';
            logToConsole('Iniciando teste de elementos DOM...');
            
            const elementos = [
                'autoDiagnosis',
                'testResults',
                'console'
            ];
            
            let successCount = 0;
            
            elementos.forEach(id => {
                const elemento = document.getElementById(id);
                if (elemento) {
                    logToConsole(`Elemento #${id} encontrado`, 'success');
                    successCount++;
                } else {
                    logToConsole(`Elemento #${id} N√ÉO encontrado`, 'error');
                }
            });
            
            showTestResult(`Elementos DOM: ${successCount}/${elementos.length} encontrados`, successCount === elementos.length);
        }
        
        // Testar navega√ß√£o
        function testNavigation() {
            document.getElementById('testResults').innerHTML = '';
            logToConsole('Iniciando teste de navega√ß√£o...');
            
            try {
                // Criar elementos de teste
                const testContainer = document.createElement('div');
                testContainer.innerHTML = `
                    <div class="nav-tabs-test">
                        <button class="nav-tab-test" onclick="showTestTab('tab1')">Tab 1</button>
                        <button class="nav-tab-test" onclick="showTestTab('tab2')">Tab 2</button>
                    </div>
                    <div class="content-test">
                        <div id="tab1" class="section-test">Conte√∫do Tab 1</div>
                        <div id="tab2" class="section-test">Conte√∫do Tab 2</div>
                    </div>
                `;
                document.body.appendChild(testContainer);
                
                // Fun√ß√£o de navega√ß√£o de teste
                window.showTestTab = function(tabName) {
                    document.querySelectorAll('.section-test').forEach(section => {
                        section.style.display = 'none';
                    });
                    const targetTab = document.getElementById(tabName);
                    if (targetTab) {
                        targetTab.style.display = 'block';
                    }
                };
                
                // Testar navega√ß√£o
                showTestTab('tab1');
                const tab1 = document.getElementById('tab1');
                if (tab1 && tab1.style.display === 'block') {
                    logToConsole('Navega√ß√£o funcionando corretamente', 'success');
                    showTestResult('Navega√ß√£o: Funcionando corretamente', true);
                } else {
                    logToConsole('Problema na navega√ß√£o', 'error');
                    showTestResult('Navega√ß√£o: Problema detectado', false);
                }
                
                // Remover elementos de teste
                document.body.removeChild(testContainer);
            } catch (error) {
                logToConsole(`Erro na navega√ß√£o: ${error.message}`, 'error');
                showTestResult(`Navega√ß√£o: Erro - ${error.message}`, false);
            }
        }
        
        // Diagn√≥stico autom√°tico ao carregar a p√°gina
        window.addEventListener('DOMContentLoaded', function() {
            const diagnosisElement = document.getElementById('autoDiagnosis');
            
            logToConsole('P√°gina de teste carregada - Iniciando diagn√≥stico autom√°tico...');
            
            // Verificar estado do DOM
            let diagnosisHTML = '<h3>Resultado do Diagn√≥stico:</h3>';
            
            // Testar elementos principais
            const mainElements = ['autoDiagnosis', 'testResults', 'console'];
            let elementsFound = 0;
            
            mainElements.forEach(id => {
                if (document.getElementById(id)) {
                    elementsFound++;
                }
            });
            
            diagnosisHTML += `<p><strong>Elementos DOM:</strong> ${elementsFound}/${mainElements.length} encontrados</p>`;
            
            // Testar Supabase
            if (typeof supabase !== 'undefined') {
                diagnosisHTML += '<p><strong>Supabase:</strong> Cliente carregado</p>';
            } else {
                diagnosisHTML += '<p><strong>Supabase:</strong> <span style="color: red;">Cliente N√ÉO carregado</span></p>';
            }
            
            // Testar JavaScript
            try {
                const jsTest = 1 + 1;
                if (jsTest === 2) {
                    diagnosisHTML += '<p><strong>JavaScript:</strong> Funcionando</p>';
                } else {
                    diagnosisHTML += '<p><strong>JavaScript:</strong> <span style="color: red;">Problema detectado</span></p>';
                }
            } catch (error) {
                diagnosisHTML += '<p><strong>JavaScript:</strong> <span style="color: red;">Erro - ' + error.message + '</span></p>';
            }
            
            diagnosisElement.innerHTML = diagnosisHTML;
            
            logToConsole('Diagn√≥stico autom√°tico conclu√≠do', 'success');
        });
        
        logToConsole('P√°gina de teste carregada com sucesso', 'success');
    </script>
</body>
</html>