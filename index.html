<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buffet Sobral</title>
    <!-- Importar Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .header { background: linear-gradient(135deg, #e91e63, #9c27b0); color: white; padding: 20px; text-align: center; }
        .header h1 { font-size: 1.8rem; margin-bottom: 8px; }
        .nav-tabs { background: white; display: flex; }
        .nav-tab { flex: 1; padding: 15px; text-align: center; border: none; background: none; cursor: pointer; border-bottom: 3px solid transparent; }
        .nav-tab.active { color: #9c27b0; border-bottom-color: #9c27b0; background: #f8f4ff; }
        .content { padding: 20px; max-width: 600px; margin: 0 auto; }
        .section { display: none; }
        .section.active { display: block; }
        .simulator-form { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .event-types { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 20px 0; }
        .event-type { padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; text-align: center; cursor: pointer; font-size: 0.9rem; }
        @media (min-width: 768px) {
            .event-types { grid-template-columns: repeat(4, 1fr); }
        }
        .event-type.active { background: #9c27b0; color: white; border-color: #9c27b0; }
        
        /* Estilos para os filtros do cat√°logo */
        .catalog-filters {
            margin-bottom: 20px;
        }
        .catalog-filters label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
        }
        .package-card { background: white; border-radius: 12px; padding: 20px; margin: 15px 0; border: 2px solid #e0e0e0; cursor: pointer; }
        .package-header { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .package-name { font-size: 1.2rem; font-weight: 600; }
        .package-price { font-size: 1.1rem; font-weight: 600; color: #4caf50; }
        .service-card { background: white; border-radius: 12px; margin: 15px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .service-image { 
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 12px 12px 0 0;
            margin-bottom: 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .service-image:hover { 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .service-image-placeholder {
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            width: 100%;
            height: 200px;
            border-radius: 12px 12px 0 0;
            margin-bottom: 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            position: relative;
        }
        .service-image-placeholder:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .service-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            will-change: transform;
        }
        .service-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }
        .service-events {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
        }
        .service-event-label {
            background: #9c27b0;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        @media (max-width: 767px) {
            .service-image, .service-image-placeholder {
                height: 150px;
                border-radius: 8px 8px 0 0;
            }
        }
        @media (min-width: 768px) {
            .services-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
            .service-card { margin: 0; }
            .service-image, .service-image-placeholder {
                height: 180px;
            }
        }
        @media (min-width: 1024px) {
            .service-image, .service-image-placeholder {
                height: 200px;
            }
        }
        .service-content { padding: 20px; }
        .service-title { font-size: 1.3rem; font-weight: 600; margin-bottom: 8px; }
        .service-price { font-size: 1.2rem; font-weight: 600; color: #4caf50; }
        .btn-add { background: #9c27b0; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; }
        .selected-services { background: #e3f2fd; border-radius: 12px; padding: 20px; margin: 20px 0; display: none; }
        .selected-services.show { display: block; }
        .selected-services h3 { color: #1976d2; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .clear-btn { background: none; border: none; color: #f44336; cursor: pointer; font-size: 0.9rem; }
        .service-item { background: white; border-radius: 8px; padding: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .service-info { flex: 1; }
        .service-name { font-weight: 600; margin-bottom: 5px; }
        .service-calc { font-size: 0.9rem; color: #666; }
        .remove-btn { background: none; border: none; color: #f44336; cursor: pointer; font-size: 0.9rem; }
        .total-section { background: #f8f9fa; border-radius: 8px; padding: 15px; margin-top: 15px; text-align: center; }
        .total-amount { font-size: 1.3rem; font-weight: bold; color: #2e7d32; }
        .whatsapp-btn { background: #25d366; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; }
        .whatsapp-btn:hover { background: #128c7e; }
        .service-slider-container { margin-top: 10px; }
        .service-slider { width: 100%; height: 4px; border-radius: 2px; background: #e0e0e0; outline: none; -webkit-appearance: none; }
        .service-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #2196f3; cursor: pointer; }
        .service-quantity { font-size: 0.9rem; color: #1976d2; font-weight: 600; margin-bottom: 5px; }
        .slider-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #999; margin-top: 3px; }
        
        /* Estilos para modais */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-title {
            color: #9c27b0;
            font-size: 1.5rem;
            margin: 0;
        }
        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .close-btn:hover {
            color: #333;
        }
        
        /* Estilos para galeria de imagens */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .gallery-item {
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            aspect-ratio: 4/3;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-item.placeholder {
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            color: white;
            font-size: 3rem;
        }
        
        /* Estilos para visualiza√ß√£o de imagem em destaque */
        .image-viewer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .image-viewer-content {
            max-width: 90%;
            max-height: 90%;
        }
        .image-viewer-content img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 8px;
        }
        .image-viewer-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 2rem;
            cursor: pointer;
        }
        .image-viewer-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .image-viewer-prev {
            left: 20px;
        }
        .image-viewer-next {
            right: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÇ Buffet Sobral</h1>
        <div>Festas inesquec√≠veis em Sobral e regi√£o</div>
        <div>üìç Sobral - CE</div>
        <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button class="btn-add" onclick="showGalleryModal()" style="background: #fff; color: #9c27b0; border: 2px solid #9c27b0; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                üì∏ Fotos do Espa√ßo
            </button>
            <button class="btn-add" onclick="showLiveCamera()" style="background: #9c27b0; color: #fff; border: 2px solid #9c27b0; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600;">
                üé• C√¢mera ao Vivo
            </button>
        </div>
    </div>

    <div class="nav-tabs">
        <button class="nav-tab" onclick="showTab('catalogo')">üìã Cat√°logo</button>
        <button class="nav-tab active" onclick="showTab('simulador')">üí∞ Simulador</button>
        <button class="nav-tab" onclick="showTab('agenda')">üìÖ Agenda</button>
        <button class="nav-tab" onclick="showTab('avaliacoes')">‚≠ê Avalia√ß√µes</button>
        <button class="nav-tab" onclick="showTab('videos')">üé¨ V√≠deos</button>
    </div>

    <div class="content">
        <div id="catalogo" class="section">
            <h2>Nossos Servi√ßos</h2>
            
            <!-- Filtros por tipo de evento -->
            <div style="margin-bottom: 20px;">
                <label>Tipo de Evento:</label>
                <div class="event-types" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                    <div class="event-type active" data-event="all">Todos</div>
                    <div class="event-type" data-event="birthday">Anivers√°rio</div>
                    <div class="event-type" data-event="wedding">Casamento</div>
                    <div class="event-type" data-event="graduation">Formatura</div>
                    <div class="event-type" data-event="corporate">Corporativo</div>
                </div>
            </div>
            
            <div class="services-grid">
            <div class="service-card" data-events="birthday,wedding,graduation,corporate,all">
                <div class="service-image-placeholder" data-service="buffet-completo" role="img" aria-label="Imagem do servi√ßo Buffet Completo">
                    <img src="/images/buffet-completo.svg" alt="Imagem do servi√ßo Buffet Completo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Buffet Completo</h3>
                    <p>Salgados, doces, bebidas e servi√ßo completo</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 45/pessoa</span>
                        <button class="btn-add" onclick="addService('Buffet Completo', 45, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Buffet Completo', 45, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="birthday,wedding,graduation,all">
                <div class="service-image-placeholder" data-service="bolo-personalizado" role="img" aria-label="Imagem do servi√ßo Bolo Personalizado">
                    <img src="/images/bolo-personalizado.svg" alt="Imagem do servi√ßo Bolo Personalizado" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Bolo Personalizado</h3>
                    <p>Bolos tem√°ticos e personalizados para sua festa</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 120/pessoa</span>
                        <button class="btn-add" onclick="addService('Bolo Personalizado', 120, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Bolo Personalizado', 120, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="birthday,wedding,graduation,all">
                <div class="service-image-placeholder" data-service="decoracao-tematica" role="img" aria-label="Imagem do servi√ßo Decora√ß√£o Tem√°tica">
                    <img src="/images/decoracao-tematica.svg" alt="Imagem do servi√ßo Decora√ß√£o Tem√°tica" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Decora√ß√£o Tem√°tica</h3>
                    <p>Decora√ß√£o completa para todos os tipos de festa</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 200/pessoa</span>
                        <button class="btn-add" onclick="addService('Decora√ß√£o Tem√°tica', 200, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Decora√ß√£o Tem√°tica', 200, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="corporate,all">
                <div class="service-image-placeholder" data-service="coffee-break" role="img" aria-label="Imagem do servi√ßo Coffee Break Corporativo">
                    <img src="/images/coffee-break.svg" alt="Imagem do servi√ßo Coffee Break Corporativo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Coffee Break Corporativo</h3>
                    <p>Caf√©, salgados, doces e sucos para eventos empresariais</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 25/pessoa</span>
                        <button class="btn-add" onclick="addService('Coffee Break Corporativo', 25, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Coffee Break Corporativo', 25, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="wedding,corporate,all">
                <div class="service-image-placeholder" data-service="jantar-executivo" role="img" aria-label="Imagem do servi√ßo Jantar Executivo">
                    <img src="/images/jantar-executivo.svg" alt="Imagem do servi√ßo Jantar Executivo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Jantar Executivo</h3>
                    <p>Menu sofisticado para jantares corporativos e eventos formais</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 85/pessoa</span>
                        <button class="btn-add" onclick="addService('Jantar Executivo', 85, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Jantar Executivo', 85, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="corporate,birthday,all">
                <div class="service-image-placeholder" data-service="coquetel-confraternizacao" role="img" aria-label="Imagem do servi√ßo Coquetel de Confraterniza√ß√£o">
                    <img src="/images/coquetel-confraternizacao.svg" alt="Imagem do servi√ßo Coquetel de Confraterniza√ß√£o" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Coquetel de Confraterniza√ß√£o</h3>
                    <p>Finger foods, canap√©s e bebidas para eventos sociais</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 35/pessoa</span>
                        <button class="btn-add" onclick="addService('Coquetel de Confraterniza√ß√£o', 35, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Coquetel de Confraterniza√ß√£o', 35, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="birthday,graduation,all">
                <div class="service-image-placeholder" data-service="lanche-eventos" role="img" aria-label="Imagem do servi√ßo Lanche para Eventos">
                    <img src="/images/lanche-eventos.svg" alt="Imagem do servi√ßo Lanche para Eventos" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Lanche para Eventos</h3>
                    <p>Sandu√≠ches, salgados e refrigerantes para eventos casuais</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 18/pessoa</span>
                        <button class="btn-add" onclick="addService('Lanche para Eventos', 18, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Lanche para Eventos', 18, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>

            <div class="service-card" data-events="birthday,wedding,graduation,all">
                <div class="service-image-placeholder" data-service="churrasco-completo" role="img" aria-label="Imagem do servi√ßo Churrasco Completo">
                    <img src="/images/churrasco-completo.svg" alt="Imagem do servi√ßo Churrasco Completo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
                </div>
                <div class="service-content">
                    <h3 class="service-title">Churrasco Completo</h3>
                    <p>Carnes nobres, acompanhamentos e saladas para confraterniza√ß√µes</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                        <span class="service-price">R$ 55/pessoa</span>
                        <button class="btn-add" onclick="addService('Churrasco Completo', 55, 'pessoa')">Adicionar</button>
                    </div>
                    <button class="whatsapp-btn" onclick="addServiceAndShareWhatsApp('Churrasco Completo', 55, 'pessoa')" style="margin-top: 10px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                </div>
            </div>
            </div>
        </div>

        <div id="simulador" class="section active">
            <h2>Simule seu Or√ßamento</h2>
            <div class="simulator-form">
                <div>
                    <label>Tipo de Evento</label>
                    <div class="event-types">
                        <div class="event-type active">Anivers√°rio</div>
                        <div class="event-type">Casamento</div>
                        <div class="event-type">Formatura</div>
                        <div class="event-type">Corporativo</div>
                    </div>
                </div>
                
                <div>
                    <label>N√∫mero de Convidados: <span id="guestCount">59</span></label>
                    <input type="range" min="20" max="500" value="59" id="guestSlider" style="width: 100%; margin: 10px 0;" oninput="updateGuestCount(this.value)">
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #666; margin-top: 5px;">
                        <span>20</span>
                        <span>500</span>
                    </div>
                </div>

                <!-- Se√ß√£o de Servi√ßos Selecionados -->
                <div id="selectedServices" class="selected-services">
                    <h3>
                        Servi√ßos Selecionados
                        <button class="clear-btn" onclick="clearAllServices()">Limpar</button>
                    </h3>
                    <div id="servicesList"></div>
                    <div id="noServicesMessage" style="text-align: center; color: #666; padding: 20px; display: none;">
                        <p>Nenhum servi√ßo selecionado</p>
                    </div>
                    <div id="addServicesButtonContainer" style="text-align: center; margin: 20px 0 10px;">
                        <button class="btn-add" onclick="showCatalog()" id="addServicesButton" style="background: #9c27b0; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 1rem; display: inline-flex; align-items: center; gap: 8px;">
                            ‚ûï Adicionar servi√ßos
                        </button>
                    </div>
                    <div class="total-section">
                        <div>Total do Or√ßamento</div>
                        <div class="total-amount" id="totalAmount">R$ 0</div>
                        <button class="whatsapp-btn" onclick="shareWhatsApp()" id="whatsappBtn" style="display: none;">
                            üì± Fechar Or√ßamento no WhatsApp
                        </button>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <label style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        Escolha seu Pacote
                        <button style="background: none; border: none; color: #9c27b0; cursor: pointer; font-size: 0.9rem;" onclick="showPackages()">Voltar aos Pacotes</button>
                    </label>
                    
                    <div id="packagesContainer">
                        <!-- Pacotes ser√£o carregados aqui -->
                        <div class="package-card">
                            <div class="package-header">
                                <div class="package-name">Pacote B√°sico</div>
                                <div class="package-price">R$ 35/pessoa</div>
                            </div>
                            <div>‚úì Buffet simples<br>‚úì Refrigerantes<br>‚úì Bolo b√°sico</div>
                            <button class="whatsapp-btn" onclick="selectPackageAndShareWhatsApp('Pacote B√°sico', 35)" style="margin-top: 15px; width: 100%;">
                                üì± Fechar Or√ßamento no WhatsApp
                            </button>
                        </div>

                        <div class="package-card">
                            <div class="package-header">
                                <div class="package-name">Pacote Completo</div>
                                <div class="package-price">R$ 55/pessoa</div>
                            </div>
                            <div>‚úì Buffet completo<br>‚úì Bebidas variadas<br>‚úì Bolo personalizado</div>
                            <button class="whatsapp-btn" onclick="selectPackageAndShareWhatsApp('Pacote Completo', 55)" style="margin-top: 15px; width: 100%;">
                                üì± Fechar Or√ßamento no WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="agenda" class="section">
            <h2>üìÖ Nossa Agenda</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">Confira nossa disponibilidade e agende seu evento</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <!-- Calend√°rio -->
                <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <button onclick="changeMonth(-1)" style="background: #9c27b0; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">‚Äπ</button>
                        <h3 id="currentMonth">Janeiro 2025</h3>
                        <button onclick="changeMonth(1)" style="background: #9c27b0; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">‚Ä∫</button>
                    </div>
                    
                    <div id="calendar" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 20px;">
                        <!-- Calend√°rio ser√° gerado aqui -->
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: center; font-size: 0.9rem;">
                        <span>üü¢ Dispon√≠vel</span>
                        <span>üî¥ Reservado</span>
                        <span>üü£ Selecionado</span>
                    </div>
                </div>
                
                <!-- Formul√°rio -->
                <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <h3>üìù Solicitar Agendamento</h3>
                    
                    <div id="selectedDate" style="display: none; background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: center;">
                        <strong>Data selecionada: <span id="selectedDateText"></span></strong>
                    </div>
                    
                    <form id="agendaForm" onsubmit="submitBooking(event)" style="display: flex; flex-direction: column; gap: 15px;">
                        <input type="text" id="clientName" placeholder="Seu nome completo" required style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        <input type="email" id="clientEmail" placeholder="seu@email.com" required style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        <input type="tel" id="clientPhone" placeholder="(85) 99999-9999" required style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        
                        <select id="eventType" required style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <option value="">Tipo de evento</option>
                            <option value="aniversario">üéÇ Anivers√°rio</option>
                            <option value="casamento">üíí Casamento</option>
                            <option value="formatura">üéì Formatura</option>
                            <option value="corporativo">üè¢ Corporativo</option>
                        </select>
                        
                        <input type="number" id="guestCount" placeholder="N√∫mero de convidados" min="1" required style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        
                        <textarea id="eventDetails" placeholder="Detalhes do evento (opcional)" rows="3" style="padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; resize: vertical;"></textarea>
                        
                        <button type="submit" style="background: linear-gradient(135deg, #9c27b0, #e91e63); color: white; border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; cursor: pointer;">
                            üìÖ Solicitar Agendamento
                        </button>
                    </form>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; text-align: center;">
                        <h4 style="color: #9c27b0; margin-bottom: 10px;">üìû Contato Direto</h4>
                        <a href="tel:+5585999999999" style="display: block; color: #9c27b0; text-decoration: none; margin: 5px 0;">üì± (85) 99999-9999</a>
                        <a href="mailto:contato@buffetsobral.com" style="display: block; color: #9c27b0; text-decoration: none; margin: 5px 0;">üìß contato@buffetsobral.com</a>
                    </div>
                </div>
            </div>
            
            <!-- Responsividade -->
            <style>
                @media (max-width: 768px) {
                    #agenda > div:first-of-type {
                        grid-template-columns: 1fr !important;
                        gap: 20px !important;
                    }
                }
            </style>
        </div>

        <div id="avaliacoes" class="section">
            <h2>Avalia√ß√µes dos Clientes</h2>
            <div id="reviewsContainer">
                <!-- Avalia√ß√µes ser√£o carregadas aqui -->
                <p style="text-align: center; color: #666; padding: 40px 20px;">
                    Carregando avalia√ß√µes...
                </p>
            </div>
            
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn-add" onclick="requestReview()" style="background: #4CAF50; color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-size: 1.1rem; display: inline-flex; align-items: center; gap: 10px;">
                    üì± Avalie nosso buffet
                </button>
                <p style="margin-top: 15px; color: #666; font-size: 0.9rem;">
                    Compartilhe sua experi√™ncia conosco pelo WhatsApp
                </p>
            </div>
        </div>
        
        <div id="videos" class="section">
            <h2>V√≠deos em Destaque</h2>
            <div id="featuredVideosContainer">
                <!-- V√≠deos em destaque ser√£o carregados aqui -->
                <p style="text-align: center; color: #666; padding: 40px 20px;">
                    Nenhum v√≠deo adicionado ainda. Volte mais tarde!
                </p>
            </div>
        </div>
    </div>

    <script>
        let selectedServices = [];
        
        <script type="module">
        // Importar integra√ß√£o com Supabase
        import { loadSiteData, setupRealtimeUpdates } from './supabase/site-integration.js';
        
        let selectedServices = [];
        let realtimeSubscriptions = [];
        
        function showTab(tabName) {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remover classe active de todas as abas
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar a se√ß√£o solicitada
            const targetSection = document.getElementById(tabName);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Ativar a aba correspondente (baseado no texto do bot√£o)
            const tabToActivate = Array.from(document.querySelectorAll('.nav-tab')).find(tab => {
                const tabText = tab.textContent.trim();
                if (tabName === 'catalogo') return tabText.includes('Cat√°logo');
                if (tabName === 'simulador') return tabText.includes('Simulador');
                if (tabName === 'agenda') return tabText.includes('Agenda');
                if (tabName === 'avaliacoes') return tabText.includes('Avalia√ß√µes');
                if (tabName === 'videos') return tabText.includes('V√≠deos');
                return false;
            });
            
            if (tabToActivate) {
                tabToActivate.classList.add('active');
            }
            
            // Carregar conte√∫do din√¢mico quando necess√°rio
            if (tabName === 'videos') {
                loadFeaturedVideos();
            }
            
            if (tabName === 'avaliacoes') {
                loadReviews();
            }
        }
        
        // Fun√ß√£o para solicitar avalia√ß√£o via WhatsApp
        function requestReview() {
            // Obter configura√ß√µes de avalia√ß√µes do localStorage
            const reviewSettings = localStorage.getItem('reviewSettings');
            let whatsappNumber = '5585999999999'; // N√∫mero padr√£o
            let reviewMessage = 'Ol√°! Gostar√≠amos muito da sua opini√£o sobre nosso buffet. Por favor, nos avalie com estrelas de 1 a 5 e deixe um coment√°rio opcional sobre sua experi√™ncia. Sua opini√£o √© muito importante para n√≥s!';
            
            if (reviewSettings) {
                try {
                    const settings = JSON.parse(reviewSettings);
                    whatsappNumber = settings.whatsappNumber.replace(/\D/g, '') || whatsappNumber;
                    reviewMessage = settings.reviewMessage || reviewMessage;
                } catch (e) {
                    console.error('Erro ao carregar configura√ß√µes de avalia√ß√µes:', e);
                }
            }
            
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(reviewMessage)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        function updateGuestCount(value) {
            document.getElementById('guestCount').textContent = value;
            updateServiceCalculations();
        }
        
        function addService(name, price, unit) {
            // Verificar se o servi√ßo j√° foi adicionado
            if (selectedServices.find(service => service.name === name)) {
                alert('Este servi√ßo j√° foi adicionado!');
                return;
            }
            
            const defaultGuests = parseInt(document.getElementById('guestCount').textContent);
            
            selectedServices.push({
                name: name,
                price: price,
                unit: unit,
                quantity: defaultGuests,
                id: Date.now() // ID √∫nico para cada servi√ßo
            });
            
            updateServicesDisplay();
            showTab('simulador');
        }
        
        // Fun√ß√£o para adicionar servi√ßo e compartilhar no WhatsApp
        function addServiceAndShareWhatsApp(name, price, unit) {
            // Adicionar o servi√ßo
            addService(name, price, unit);
            
            // Compartilhar no WhatsApp ap√≥s um pequeno delay para garantir que o servi√ßo foi adicionado
            setTimeout(() => {
                shareServiceWhatsApp(name, price, unit);
            }, 500);
        }
        
        // Fun√ß√£o para compartilhar servi√ßo no WhatsApp
        function shareServiceWhatsApp(name, price, unit) {
            const guestCount = document.getElementById('guestCount').textContent;
            const selectedEventType = document.querySelector('.event-type.active').textContent;
            
            let message = `üéâ *Or√ßamento Buffet Sobral* üéâ

`;
            message += `üìã *Tipo de Evento:* ${selectedEventType}
`;
            message += `üë• *N√∫mero de Convidados:* ${guestCount} pessoas

`;
            message += `üçΩÔ∏è *Servi√ßo Selecionado: ${name}*
`;
            message += `üí∞ *Pre√ßo: R$ ${price}/${unit}*

`;
            message += `üíµ *Valor Total: R$ ${Math.round(price * parseInt(guestCount)).toLocaleString('pt-BR')}*

`;
            message += `üìç Buffet Sobral - CE
`;
            message += `üìû Entre em contato para confirmar!`;
            
            // Obter n√∫mero do WhatsApp configurado no painel administrativo
            let whatsappNumber = '5588999999999'; // N√∫mero padr√£o
            const contactData = localStorage.getItem('contactInfo');
            if (contactData) {
                try {
                    const contactInfo = JSON.parse(contactData);
                    if (contactInfo.whatsappNumber) {
                        // Remover todos os caracteres n√£o num√©ricos e adicionar o c√≥digo do pa√≠s (55)
                        const cleanNumber = contactInfo.whatsappNumber.replace(/\D/g, '');
                        if (cleanNumber.length >= 10) {
                            whatsappNumber = '55' + cleanNumber;
                        }
                    }
                } catch (e) {
                    console.error('Erro ao carregar n√∫mero do WhatsApp:', e);
                }
            }
            
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        function removeService(serviceName) {
            selectedServices = selectedServices.filter(service => service.name !== serviceName);
            updateServicesDisplay();
        }
        
        function clearAllServices() {
            selectedServices = [];
            updateServicesDisplay();
        }
        
        function updateServicesDisplay() {
            const servicesList = document.getElementById('servicesList');
            const selectedServicesDiv = document.getElementById('selectedServices');
            const whatsappBtn = document.getElementById('whatsappBtn');
            const addServicesButton = document.getElementById('addServicesButton');
            const noServicesMessage = document.getElementById('noServicesMessage');
            
            // Sempre mostrar a se√ß√£o de servi√ßos selecionados para que o bot√£o esteja vis√≠vel
            selectedServicesDiv.classList.add('show');
            
            if (selectedServices.length === 0) {
                servicesList.innerHTML = '';
                whatsappBtn.style.display = 'none';
                // Mostrar mensagem indicando que n√£o h√° servi√ßos selecionados
                if (noServicesMessage) {
                    noServicesMessage.style.display = 'block';
                }
                // Atualizar texto do bot√£o para "Adicionar servi√ßos"
                if (addServicesButton) {
                    addServicesButton.innerHTML = '‚ûï Adicionar servi√ßos';
                    addServicesButton.style.marginTop = '0';
                }
            } else {
                whatsappBtn.style.display = 'flex';
                // Esconder mensagem de "sem servi√ßos"
                if (noServicesMessage) {
                    noServicesMessage.style.display = 'none';
                }
                // Atualizar texto do bot√£o para "Adicionar mais servi√ßos"
                if (addServicesButton) {
                    addServicesButton.innerHTML = '‚ûï Adicionar mais servi√ßos';
                    addServicesButton.style.marginTop = '20px';
                }
                
                let total = 0;
                
                servicesList.innerHTML = selectedServices.map(service => {
                    const serviceTotal = service.price * service.quantity;
                    total += serviceTotal;
                    
                    return `
                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">${service.name}</div>
                                <div class="service-quantity">Quantidade: ${service.quantity} pessoas</div>
                                <div class="service-slider-container">
                                    <input type="range" min="1" max="500" value="${service.quantity}" 
                                           class="service-slider" 
                                           oninput="updateServiceQuantity(${service.id}, this.value)">
                                    <div class="slider-labels">
                                        <span>1</span>
                                        <span>500</span>
                                    </div>
                                </div>
                                <div class="service-calc">R$ ${service.price}/${service.unit} = R$ ${serviceTotal.toLocaleString('pt-BR')}</div>
                            </div>
                            <button class="remove-btn" onclick="removeService('${service.name}')">Remover</button>
                        </div>
                    `;
                }).join('');
                
                document.getElementById('totalAmount').textContent = `R$ ${total.toLocaleString('pt-BR')}`;
            }
        }
        
        function updateServiceCalculations() {
            // Atualizar a quantidade de todos os servi√ßos com base no slider principal
            const mainGuestCount = parseInt(document.getElementById('guestCount').textContent);
            selectedServices.forEach(service => {
                service.quantity = mainGuestCount;
            });
            
            if (selectedServices.length > 0) {
                updateServicesDisplay();
            }
        }
        
        function updateServiceQuantity(serviceId, newQuantity) {
            const service = selectedServices.find(s => s.id === serviceId);
            if (service) {
                service.quantity = parseInt(newQuantity);
                updateServicesDisplay();
            }
        }
        
        // Fun√ß√£o para mostrar o cat√°logo de servi√ßos
        function showCatalog() {
            // Mostrar a aba do cat√°logo
            showTab('catalogo');
            
            // Rolar para o topo do cat√°logo
            document.getElementById('catalogo').scrollIntoView({ behavior: 'smooth' });
        }
        
        function selectPackage(element, packageName, price) {
            document.querySelectorAll('.package-card').forEach(c => {
                c.style.borderColor = '#e0e0e0';
                c.style.background = 'white';
            });
            if (element) {
                element.style.borderColor = '#9c27b0';
                element.style.background = '#f8f4ff';
            }
        }
        
        function showPackages() {
            // Fun√ß√£o para voltar aos pacotes (pode ser implementada conforme necess√°rio)
            console.log('Voltando aos pacotes...');
        }
        
        // Adicionar interatividade aos tipos de evento
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.event-type').forEach(type => {
                type.addEventListener('click', function() {
                    document.querySelectorAll('.event-type').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    // Filtrar servi√ßos com base no tipo de evento selecionado
                    filterServicesByEvent(this.dataset.event);
                });
            });
            
            // Adicionar interatividade aos filtros de evento no cat√°logo
            document.querySelectorAll('.event-type[data-event]').forEach(filter => {
                filter.addEventListener('click', function() {
                    document.querySelectorAll('.event-type[data-event]').forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                    filterServicesByEventType(this.dataset.event);
                });
            });
        });
        
        // Fun√ß√£o para filtrar servi√ßos por tipo de evento
        function filterServicesByEventType(eventType) {
            const services = document.querySelectorAll('.service-card');
            
            services.forEach(service => {
                const serviceEvents = service.dataset.events.split(',');
                
                if (eventType === 'all' || serviceEvents.includes(eventType)) {
                    service.style.display = 'block';
                } else {
                    service.style.display = 'none';
                }
            });
        }
        
        // Fun√ß√£o para filtrar servi√ßos por tipo de evento (mantida para compatibilidade)
        function filterServicesByEvent(eventType) {
            // Esta fun√ß√£o √© mantida para compatibilidade com o c√≥digo existente
            filterServicesByEventType(eventType);
        }
        
        function shareWhatsApp() {
            const guestCount = document.getElementById('guestCount').textContent;
            const totalAmount = document.getElementById('totalAmount').textContent;
            const selectedEventType = document.querySelector('.event-type.active').textContent;
            
            let message = `üéâ *Or√ßamento Buffet Sobral* üéâ\n\n`;
            message += `üìã *Tipo de Evento:* ${selectedEventType}\n`;
            message += `üë• *N√∫mero de Convidados:* ${guestCount} pessoas\n\n`;
            message += `üçΩÔ∏è *Servi√ßos Selecionados:*\n`;
            
            selectedServices.forEach(service => {
                const serviceTotal = service.price * service.quantity;
                message += `‚Ä¢ ${service.name}\n`;
                message += `  ${service.quantity} pessoas √ó R$ ${service.price} = R$ ${serviceTotal.toLocaleString('pt-BR')}\n\n`;
            });
            
            message += `üí∞ *TOTAL: ${totalAmount}*\n\n`;
            message += `üìç Buffet Sobral - CE\n`;
            message += `üìû Entre em contato para confirmar!`;
            
            // Obter n√∫mero do WhatsApp configurado no painel administrativo
            let whatsappNumber = '5588999999999'; // N√∫mero padr√£o
            const contactData = localStorage.getItem('contactInfo');
            if (contactData) {
                try {
                    const contactInfo = JSON.parse(contactData);
                    if (contactInfo.whatsappNumber) {
                        // Remover todos os caracteres n√£o num√©ricos e adicionar o c√≥digo do pa√≠s (55)
                        const cleanNumber = contactInfo.whatsappNumber.replace(/\D/g, '');
                        if (cleanNumber.length >= 10) {
                            whatsappNumber = '55' + cleanNumber;
                        }
                    }
                } catch (e) {
                    console.error('Erro ao carregar n√∫mero do WhatsApp:', e);
                }
            }
            
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // Fun√ß√£o para carregar dados do painel administrativo
        function loadAdminData() {
            const servicesData = localStorage.getItem('servicesData');
            if (servicesData) {
                const data = JSON.parse(servicesData);
                updateServicesFromAdmin(data);
            }
            
            // Carregar eventos dos servi√ßos
            loadServicesEvents();
            
            // Carregar configura√ß√µes dos pacotes
            loadPackagesConfig();
            
            // Carregar informa√ß√µes de contato
            loadContactInfo();
        }
        
        // Fun√ß√£o para carregar informa√ß√µes de contato
        function loadContactInfo() {
            const contactData = localStorage.getItem('contactInfo');
            if (contactData) {
                try {
                    const data = JSON.parse(contactData);
                    updateContactInfoOnPage(data);
                } catch (e) {
                    console.error('Erro ao carregar informa√ß√µes de contato:', e);
                }
            }
        }
        
        // Fun√ß√£o para atualizar informa√ß√µes de contato na p√°gina
        function updateContactInfoOnPage(contactInfo) {
            // Atualizar n√∫mero do WhatsApp nos bot√µes de or√ßamento
            const whatsappButtons = document.querySelectorAll('[onclick*="shareWhatsApp"]');
            whatsappButtons.forEach(button => {
                const onclick = button.getAttribute('onclick');
                if (onclick && contactInfo.whatsappNumber) {
                    // Extrair o n√∫mero atual do onclick
                    const match = onclick.match(/https:\/\/wa\.me\/(\d+)/);
                    if (match) {
                        // Substituir o n√∫mero antigo pelo novo n√∫mero
                        const formattedNumber = contactInfo.whatsappNumber.replace(/\D/g, '');
                        const newOnclick = onclick.replace(/https:\/\/wa\.me\/\d+/, `https://wa.me/${formattedNumber}`);
                        button.setAttribute('onclick', newOnclick);
                    }
                }
            });
            
            // Atualizar email de contato se existir
            if (contactInfo.contactEmail) {
                const emailElements = document.querySelectorAll('[href^="mailto:"]');
                emailElements.forEach(element => {
                    element.href = `mailto:${contactInfo.contactEmail}`;
                    element.textContent = contactInfo.contactEmail;
                });
            }
            
            // Atualizar telefone de contato se existir
            if (contactInfo.contactPhone) {
                const phoneElements = document.querySelectorAll('[href^="tel:"]');
                phoneElements.forEach(element => {
                    const formattedPhone = contactInfo.contactPhone.replace(/\D/g, '');
                    element.href = `tel:+55${formattedPhone}`;
                    element.textContent = contactInfo.contactPhone;
                });
            }
        }
        
        // Fun√ß√£o para carregar eventos dos servi√ßos
        function loadServicesEvents() {
            const servicesEvents = localStorage.getItem('servicesEvents');
            if (servicesEvents) {
                try {
                    const eventsData = JSON.parse(servicesEvents);
                    updateServicesEventsFromAdmin(eventsData);
                } catch (e) {
                    console.error('Erro ao carregar eventos dos servi√ßos:', e);
                }
            }
        }
        
        // Fun√ß√£o para atualizar eventos dos servi√ßos com dados do admin
        function updateServicesEventsFromAdmin(adminEventsData) {
            // Mapeamento dos IDs do admin para os elementos do site
            const serviceMapping = {
                'buffet-completo': 'buffet-completo',
                'bolo-personalizado': 'bolo-personalizado',
                'decoracao-tematica': 'decoracao-tematica',
                'coffee-break': 'coffee-break',
                'jantar-executivo': 'jantar-executivo',
                'coquetel-confraternizacao': 'coquetel-confraternizacao',
                'lanche-eventos': 'lanche-eventos',
                'churrasco-completo': 'churrasco-completo'
            };
            
            // Atualizar eventos para cada servi√ßo
            Object.keys(serviceMapping).forEach(serviceId => {
                const adminServiceId = serviceMapping[serviceId];
                const serviceEvents = adminEventsData[adminServiceId] || [];
                const serviceElement = document.querySelector(`[data-service="${serviceId}"]`);
                
                if (serviceElement) {
                    const serviceCard = serviceElement.closest('.service-card');
                    if (serviceCard) {
                        // Atualizar atributo data-events
                        serviceCard.setAttribute('data-events', serviceEvents.join(','));
                        
                        // Adicionar etiquetas visuais dos eventos
                        addEventLabelsToService(serviceCard, serviceEvents);
                    }
                }
            });
        }
        
        // Fun√ß√£o para adicionar etiquetas visuais dos eventos aos servi√ßos
        function addEventLabelsToService(serviceCard, events) {
            // Remover etiquetas existentes se houver
            const existingLabels = serviceCard.querySelector('.service-events');
            if (existingLabels) {
                existingLabels.remove();
            }
            
            // N√£o adicionar etiquetas se n√£o houver eventos ou se for "all"
            if (!events || events.length === 0 || (events.length === 1 && events[0] === 'all')) {
                return;
            }
            
            // Mapeamento de eventos para nomes e cores
            const eventNames = {
                'birthday': { name: 'Anivers√°rio', color: '#4CAF50' },
                'wedding': { name: 'Casamento', color: '#E91E63' },
                'graduation': { name: 'Formatura', color: '#2196F3' },
                'corporate': { name: 'Corporativo', color: '#9C27B0' }
            };
            
            // Criar container para as etiquetas
            const eventsContainer = document.createElement('div');
            eventsContainer.className = 'service-events';
            eventsContainer.style.cssText = `
                display: flex;
                flex-wrap: wrap;
                gap: 5px;
                margin: 10px 0;
            `;
            
            // Adicionar etiquetas para cada evento
            events.forEach(event => {
                if (event !== 'all' && eventNames[event]) {
                    const eventLabel = document.createElement('span');
                    eventLabel.className = 'service-event-label';
                    eventLabel.textContent = eventNames[event].name;
                    eventLabel.style.cssText = `
                        background: ${eventNames[event].color};
                        color: white;
                        padding: 3px 8px;
                        border-radius: 12px;
                        font-size: 0.7rem;
                        font-weight: 600;
                    `;
                    eventsContainer.appendChild(eventLabel);
                }
            });
            
            // Inserir as etiquetas ap√≥s o conte√∫do do servi√ßo
            const serviceContent = serviceCard.querySelector('.service-content');
            if (serviceContent) {
                serviceContent.insertBefore(eventsContainer, serviceContent.firstChild);
            }
        }
        
        // Fun√ß√£o para atualizar eventos dos servi√ßos com dados do admin
        
        // Fun√ß√£o para adicionar etiquetas visuais dos eventos aos servi√ßos
        
        // Fun√ß√£o para carregar configura√ß√µes dos pacotes
        function loadPackagesConfig() {
            const packagesConfig = localStorage.getItem('packagesConfig');
            if (packagesConfig) {
                try {
                    const config = JSON.parse(packagesConfig);
                    updatePackagesFromAdmin(config);
                } catch (e) {
                    console.error('Erro ao carregar configura√ß√µes dos pacotes:', e);
                }
            }
        }
        
        // Fun√ß√£o para atualizar pacotes com dados do admin
        function updatePackagesFromAdmin(adminData) {
            const packagesContainer = document.getElementById('packagesContainer');
            if (!packagesContainer) return;
            
            // Limpar container
            packagesContainer.innerHTML = '';
            
            // Adicionar pacote b√°sico
            if (adminData.basic) {
                const basicPackage = adminData.basic;
                const basicPackageElement = document.createElement('div');
                basicPackageElement.className = 'package-card';
                basicPackageElement.innerHTML = `
                    <div class="package-header">
                        <div class="package-name">${basicPackage.name}</div>
                        <div class="package-price">R$ ${basicPackage.price}/pessoa</div>
                    </div>
                    <div>${basicPackage.description.replace(/\n/g, '<br>')}</div>
                    <button class="whatsapp-btn" onclick="selectPackageAndShareWhatsApp('${basicPackage.name}', ${basicPackage.price})" style="margin-top: 15px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                `;
                packagesContainer.appendChild(basicPackageElement);
            }
            
            // Adicionar pacote completo
            if (adminData.complete) {
                const completePackage = adminData.complete;
                const completePackageElement = document.createElement('div');
                completePackageElement.className = 'package-card';
                completePackageElement.innerHTML = `
                    <div class="package-header">
                        <div class="package-name">${completePackage.name}</div>
                        <div class="package-price">R$ ${completePackage.price}/pessoa</div>
                    </div>
                    <div>${completePackage.description.replace(/\n/g, '<br>')}</div>
                    <button class="whatsapp-btn" onclick="selectPackageAndShareWhatsApp('${completePackage.name}', ${completePackage.price})" style="margin-top: 15px; width: 100%;">
                        üì± Fechar Or√ßamento no WhatsApp
                    </button>
                `;
                packagesContainer.appendChild(completePackageElement);
            }
        }
        
        // Fun√ß√£o para selecionar pacote e compartilhar no WhatsApp
        function selectPackageAndShareWhatsApp(packageName, price) {
            // Selecionar o pacote
            selectPackage(null, packageName, price);
            
            // Compartilhar no WhatsApp ap√≥s um pequeno delay para garantir que o pacote foi selecionado
            setTimeout(() => {
                sharePackageWhatsApp(packageName, price);
            }, 500);
        }
        
        // Fun√ß√£o para compartilhar pacote no WhatsApp
        function sharePackageWhatsApp(packageName, price) {\n            const guestCount = document.getElementById('guestCount').textContent;\n            const selectedEventType = document.querySelector('.event-type.active').textContent;\n            \n            let message = `üéâ *Or√ßamento Buffet Sobral* üéâ\\n\\n`;\n            message += `üìã *Tipo de Evento:* ${selectedEventType}\\n`;\n            message += `üë• *N√∫mero de Convidados:* ${guestCount} pessoas\\n\\n`;\n            message += `üì¶ *Pacote Selecionado: ${packageName}*\\n`;\n            message += `üí∞ *Pre√ßo: R$ ${price}/pessoa*\\n\\n`;\n            message += `üíµ *Valor Total: R$ ${Math.round(price * parseInt(guestCount)).toLocaleString('pt-BR')}*\\n\\n`;\n            message += `üìç Buffet Sobral - CE\\n`;\n            message += `üìû Entre em contato para confirmar!`;\n            \n            // Obter n√∫mero do WhatsApp configurado no painel administrativo\n            let whatsappNumber = '5588999999999'; // N√∫mero padr√£o\n            const contactData = localStorage.getItem('contactInfo');\n            if (contactData) {\n                try {\n                    const contactInfo = JSON.parse(contactData);\n                    if (contactInfo.whatsappNumber) {\n                        // Remover todos os caracteres n√£o num√©ricos e adicionar o c√≥digo do pa√≠s (55)\n                        const cleanNumber = contactInfo.whatsappNumber.replace(/\\D/g, '');\n                        if (cleanNumber.length >= 10) {\n                            whatsappNumber = '55' + cleanNumber;\n                        }\n                    }\n                } catch (e) {\n                    console.error('Erro ao carregar n√∫mero do WhatsApp:', e);\n                }\n            }\n            \n            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;\n            window.open(whatsappUrl, '_blank');\n        }
        
        // Fun√ß√£o para atualizar servi√ßos com dados do admin
        function updateServicesFromAdmin(adminData) {
            // Mapeamento dos IDs do admin para os elementos do site
            const serviceMapping = {
                'buffet-completo': { name: 'Buffet Completo', defaultPrice: 45 },
                'bolo-personalizado': { name: 'Bolo Personalizado', defaultPrice: 120 },
                'decoracao-tematica': { name: 'Decora√ß√£o Tem√°tica', defaultPrice: 200 },
                'coffee-break': { name: 'Coffee Break Corporativo', defaultPrice: 25 },
                'jantar-executivo': { name: 'Jantar Executivo', defaultPrice: 85 },
                'coquetel-confraternizacao': { name: 'Coquetel de Confraterniza√ß√£o', defaultPrice: 35 },
                'lanche-eventos': { name: 'Lanche para Eventos', defaultPrice: 18 },
                'churrasco-completo': { name: 'Churrasco Completo', defaultPrice: 55 }
            };
            
            Object.keys(serviceMapping).forEach(serviceId => {
                const serviceData = adminData[serviceId];
                const mapping = serviceMapping[serviceId];
                const serviceElement = document.querySelector(`[data-service="${serviceId}"]`);
                
                if (serviceElement && serviceData) {
                    // Atualizar pre√ßo se foi modificado
                    if (serviceData.price && serviceData.price !== mapping.defaultPrice) {
                        const serviceCard = serviceElement.closest('.service-card');
                        const priceElement = serviceCard.querySelector('.service-price');
                        if (priceElement) {
                            priceElement.textContent = `R$ ${serviceData.price}/pessoa`;
                        }
                        
                        // Atualizar tamb√©m no JavaScript para o simulador
                        updateServicePrice(mapping.name, serviceData.price);
                    }
                    
                    // Adicionar imagem se foi carregada
                    if (serviceData.image) {
                        addServiceImage(serviceElement.closest('.service-card'), serviceData.image);
                    }
                }
            });
            
            // Carregar eventos dos servi√ßos ap√≥s atualizar os servi√ßos
            loadServicesEvents();
        }
        
        // Fun√ß√£o para atualizar pre√ßo no simulador
        function updateServicePrice(serviceName, newPrice) {
            // Atualizar nos bot√µes de adicionar servi√ßo
            const buttons = document.querySelectorAll('button[onclick*="addService"]');
            buttons.forEach(button => {
                const onclick = button.getAttribute('onclick');
                if (onclick.includes(serviceName)) {
                    // Extrair par√¢metros atuais
                    const match = onclick.match(/addService\('([^']+)',\s*(\d+),\s*'([^']+)'\)/);
                    if (match) {
                        const [, name, , unit] = match;
                        button.setAttribute('onclick', `addService('${name}', ${newPrice}, '${unit}')`);
                    }
                }
            });
        }
        
        // Fun√ß√£o para adicionar imagem ao servi√ßo
        function addServiceImage(serviceElement, imageData) {
            const placeholder = serviceElement.querySelector('.service-image-placeholder');
            if (placeholder) {
                // Substituir placeholder por imagem real
                const imageContainer = document.createElement('div');
                imageContainer.className = 'service-image';
                imageContainer.setAttribute('data-service', placeholder.getAttribute('data-service'));
                
                // Criar elemento img para detectar erros de carregamento
                const img = new Image();
                img.onload = function() {
                    imageContainer.style.backgroundImage = `url(${imageData})`;
                    placeholder.parentNode.replaceChild(imageContainer, placeholder);
                };
                img.onerror = function() {
                    console.warn('Erro ao carregar imagem para servi√ßo:', placeholder.getAttribute('data-service'));
                    // Manter placeholder em caso de erro
                };
                img.src = imageData;
            }
        }
        
        // Fun√ß√£o para detectar imagens quebradas e substituir por placeholder
        function handleImageError(serviceId) {
            const serviceElement = document.querySelector(`[data-service="${serviceId}"]`);
            if (serviceElement && serviceElement.classList.contains('service-image')) {
                // Substituir imagem quebrada por placeholder
                const placeholder = createServicePlaceholder(serviceId);
                serviceElement.parentNode.replaceChild(placeholder, serviceElement);
            }
        }
        
        // Fun√ß√£o para criar placeholder baseado no ID do servi√ßo
        function createServicePlaceholder(serviceId) {
            const serviceData = {
                'buffet-completo': { 
                    image: '/images/buffet-completo.svg', 
                    alt: 'Imagem do servi√ßo Buffet Completo' 
                },
                'bolo-personalizado': { 
                    image: '/images/bolo-personalizado.svg', 
                    alt: 'Imagem do servi√ßo Bolo Personalizado' 
                },
                'decoracao-tematica': { 
                    image: '/images/decoracao-tematica.svg', 
                    alt: 'Imagem do servi√ßo Decora√ß√£o Tem√°tica' 
                },
                'coffee-break': { 
                    image: '/images/coffee-break.svg', 
                    alt: 'Imagem do servi√ßo Coffee Break Corporativo' 
                },
                'jantar-executivo': { 
                    image: '/images/jantar-executivo.svg', 
                    alt: 'Imagem do servi√ßo Jantar Executivo' 
                },
                'coquetel-confraternizacao': { 
                    image: '/images/coquetel-confraternizacao.svg', 
                    alt: 'Imagem do servi√ßo Coquetel de Confraterniza√ß√£o' 
                },
                'lanche-eventos': { 
                    image: '/images/lanche-eventos.svg', 
                    alt: 'Imagem do servi√ßo Lanche para Eventos' 
                },
                'churrasco-completo': { 
                    image: '/images/churrasco-completo.svg', 
                    alt: 'Imagem do servi√ßo Churrasco Completo' 
                }
            };
            
            const serviceInfo = serviceData[serviceId] || { 
                image: '/images/buffet-completo.svg', 
                alt: 'Imagem do servi√ßo' 
            };
            
            const placeholder = document.createElement('div');
            placeholder.className = 'service-image-placeholder';
            placeholder.setAttribute('data-service', serviceId);
            placeholder.setAttribute('role', 'img');
            placeholder.setAttribute('aria-label', serviceInfo.alt);
            placeholder.innerHTML = `
                <img src="${serviceInfo.image}" alt="${serviceInfo.alt}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px 12px 0 0;">
            `;
            
            return placeholder;
        }
        
        // Fun√ß√£o para implementar lazy loading de imagens
        function setupLazyLoading() {
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const imageElement = entry.target;
                            const backgroundImage = window.getComputedStyle(imageElement).backgroundImage;
                            
                            if (backgroundImage && backgroundImage !== 'none') {
                                // Imagem j√° est√° carregada, apenas observar
                                observer.unobserve(imageElement);
                            }
                        }
                    });
                });
                
                document.querySelectorAll('.service-image, .service-image-placeholder').forEach(img => {
                    imageObserver.observe(img);
                });
            }
        }
        
        // Fun√ß√£o para monitorar erros de imagem
        function setupImageErrorHandling() {
            // Monitorar todas as imagens de servi√ßo
            document.querySelectorAll('.service-image').forEach(imageElement => {
                const serviceId = imageElement.getAttribute('data-service');
                
                // Verificar se a imagem de background carregou corretamente
                const backgroundImage = window.getComputedStyle(imageElement).backgroundImage;
                if (backgroundImage && backgroundImage !== 'none') {
                    const imageUrl = backgroundImage.slice(5, -2); // Remove url(" e ")
                    
                    const testImg = new Image();
                    testImg.onerror = function() {
                        console.warn(`Erro ao carregar imagem para servi√ßo ${serviceId}:`, imageUrl);
                        handleImageError(serviceId);
                    };
                    testImg.src = imageUrl;
                }
            });
        }
        
        // Fun√ß√£o para log de erros
        function logImageError(serviceId, imageUrl, error) {
            const errorData = {
                timestamp: new Date().toISOString(),
                serviceId: serviceId,
                imageUrl: imageUrl,
                error: error.message || 'Erro desconhecido'
            };
            
            console.error('Erro de imagem registrado:', errorData);
            
            // Salvar no localStorage para debugging (opcional)
            const errorLog = JSON.parse(localStorage.getItem('imageErrors') || '[]');
            errorLog.push(errorData);
            
            // Manter apenas os √∫ltimos 10 erros
            if (errorLog.length > 10) {
                errorLog.shift();
            }
            
            localStorage.setItem('imageErrors', JSON.stringify(errorLog));
        }
        
        // Carregar dados do admin quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            loadAdminData();
            
            // Carregar dados do Supabase
            loadSiteDataFromSupabase();
            
            // Configurar lazy loading
            setupLazyLoading();
            
            // Configurar monitoramento de erros ap√≥s um pequeno delay
            setTimeout(setupImageErrorHandling, 1000);
            
            // Inicializar a exibi√ß√£o dos servi√ßos selecionados
            updateServicesDisplay();
        });
        
        // Fun√ß√£o para carregar dados do Supabase
        async function loadSiteDataFromSupabase() {
            try {
                // Carregar dados do site do Supabase
                await loadSiteData();
                
                // Carregar eventos dos servi√ßos do Supabase
                await loadServicesEventsFromSupabase();
                
                // Configurar atualiza√ß√µes em tempo real
                const subscriptions = setupRealtimeUpdates();
                // Armazenar subscri√ß√µes para limpeza posterior
                
                console.log('Dados do site carregados com sucesso do Supabase');
            } catch (error) {
                console.error('Erro ao carregar dados do Supabase:', error);
                // Fallback para dados do localStorage
                loadAdminData();
            }
        }
        
        // Fun√ß√£o para carregar eventos dos servi√ßos do Supabase
        async function loadServicesEventsFromSupabase() {
            try {
                // Verificar se o arquivo de integra√ß√£o com Supabase existe
                const supabaseIntegration = await import('./supabase/site-integration.js');
                
                // Carregar eventos dos servi√ßos do Supabase
                console.log('Carregando eventos dos servi√ßos do Supabase...');
            } catch (error) {
                console.error('Erro ao carregar eventos dos servi√ßos do Supabase:', error);
                // Fallback para dados do localStorage
                loadServicesEvents();
            }
        }
        
        // Carregar configura√ß√µes dos pacotes
        document.addEventListener('DOMContentLoaded', function() {
            loadPackagesConfig();
        });
        
        // Fun√ß√£o de teste para validar implementa√ß√£o
        function validateImageImplementation() {
            const results = {
                placeholdersFound: 0,
                placeholdersWithIcons: 0,
                placeholdersWithOverlay: 0,
                placeholdersWithAccessibility: 0,
                cssClassesPresent: false
            };
            
            // Verificar placeholders
            const placeholders = document.querySelectorAll('.service-image-placeholder');
            results.placeholdersFound = placeholders.length;
            
            placeholders.forEach(placeholder => {
                // Verificar √≠cones
                if (placeholder.textContent.match(/[üçΩÔ∏èüéÇüé®‚òïü•Çüç∏ü•™üî•]/)) {
                    results.placeholdersWithIcons++;
                }
                
                // Verificar overlay (removido)
                
                // Verificar acessibilidade
                if (placeholder.getAttribute('role') === 'img' && placeholder.getAttribute('aria-label')) {
                    results.placeholdersWithAccessibility++;
                }
            });
            
            // Verificar se classes CSS est√£o presentes
            const styleElement = document.querySelector('style');
            if (styleElement && styleElement.textContent.includes('.service-image-placeholder')) {
                results.cssClassesPresent = true;
            }
            
            console.log('üé® Valida√ß√£o das Melhorias CSS das Imagens:', results);
            
            // Verificar se implementa√ß√£o est√° completa
            const isComplete = results.placeholdersFound === 8 && 
                             results.placeholdersWithIcons === 8 && 
                             results.placeholdersWithOverlay === 8 && 
                             results.placeholdersWithAccessibility === 8 && 
                             results.cssClassesPresent;
            
            if (isComplete) {
                console.log('‚úÖ Implementa√ß√£o das melhorias CSS conclu√≠da com sucesso!');
            } else {
                console.warn('‚ö†Ô∏è Alguns elementos da implementa√ß√£o podem estar faltando.');
            }
            
            return results;
        }
        
        console.log('Buffet Sobral carregado!');
        
        // Executar valida√ß√£o ap√≥s carregamento completo
        setTimeout(validateImageImplementation, 2000);
        
        // Sistema de Agenda Simples
        let currentDate = new Date();
        let selectedDate = null;
        let bookedDates = ['2025-01-05', '2025-01-12', '2025-01-19', '2025-01-26']; // Datas de exemplo
        
        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            const monthElement = document.getElementById('currentMonth');
            
            if (!calendar || !monthElement) return;
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            const monthNames = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
                              'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            monthElement.textContent = `${monthNames[month]} ${year}`;
            
            calendar.innerHTML = '';
            
            // Cabe√ßalhos dos dias
            const dayHeaders = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
            dayHeaders.forEach(day => {
                const dayElement = document.createElement('div');
                dayElement.style.cssText = 'padding: 8px; text-align: center; font-weight: 600; color: #666; background: #f5f5f5;';
                dayElement.textContent = day;
                calendar.appendChild(dayElement);
            });
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const today = new Date();
            
            // Dias vazios do m√™s anterior
            for (let i = 0; i < firstDay.getDay(); i++) {
                const emptyDay = document.createElement('div');
                emptyDay.style.cssText = 'padding: 8px;';
                calendar.appendChild(emptyDay);
            }
            
            // Dias do m√™s
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const date = new Date(year, month, day);
                const dateString = date.toISOString().split('T')[0];
                const dayElement = document.createElement('div');
                
                let style = 'padding: 8px; text-align: center; cursor: pointer; border-radius: 4px; transition: all 0.2s;';
                let bgColor = '#e8f5e8'; // Verde para dispon√≠vel
                
                if (date < today.setHours(0,0,0,0)) {
                    bgColor = '#f5f5f5';
                    style += 'color: #ccc; cursor: not-allowed;';
                } else if (bookedDates.includes(dateString)) {
                    bgColor = '#ffebee';
                    style += 'color: #c62828; cursor: not-allowed;';
                } else if (selectedDate && dateString === selectedDate) {
                    bgColor = '#9c27b0';
                    style += 'color: white; transform: scale(1.1);';
                } else {
                    style += 'color: #2e7d32;';
                    dayElement.onclick = () => selectDate(dateString, date);
                }
                
                dayElement.style.cssText = style + `background: ${bgColor};`;
                dayElement.textContent = day;
                calendar.appendChild(dayElement);
            }
        }
        
        function selectDate(dateString, dateObj) {
            selectedDate = dateString;
            generateCalendar();
            
            const selectedDateDiv = document.getElementById('selectedDate');
            const selectedDateText = document.getElementById('selectedDateText');
            
            if (selectedDateDiv && selectedDateText) {
                selectedDateText.textContent = dateObj.toLocaleDateString('pt-BR', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                selectedDateDiv.style.display = 'block';
            }
        }
        
        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            generateCalendar();
        }
        
        function submitBooking(event) {
            event.preventDefault();
            
            if (!selectedDate) {
                alert('Por favor, selecione uma data no calend√°rio.');
                return;
            }
            
            const formData = {
                name: document.getElementById('clientName').value,
                email: document.getElementById('clientEmail').value,
                phone: document.getElementById('clientPhone').value,
                eventType: document.getElementById('eventType').value,
                guests: document.getElementById('guestCount').value,
                details: document.getElementById('eventDetails').value,
                date: selectedDate
            };
            
            const eventTypes = {
                'aniversario': 'Anivers√°rio',
                'casamento': 'Casamento',
                'formatura': 'Formatura',
                'corporativo': 'Corporativo'
            };
            
            const message = `üéâ *AGENDAMENTO BUFFET SOBRAL*\\n\\n` +
                `üë§ *Cliente:* ${formData.name}\\n` +
                `üìß *Email:* ${formData.email}\\n` +
                `üì± *Telefone:* ${formData.phone}\\n\\n` +
                `üìÖ *Data:* ${new Date(formData.date).toLocaleDateString('pt-BR')}\\n` +
                `üéä *Evento:* ${eventTypes[formData.eventType]}\\n` +
                `üë• *Convidados:* ${formData.guests}\\n\\n` +
                `üìù *Detalhes:* ${formData.details || 'Nenhum detalhe adicional'}`;
            
            const whatsappUrl = `https://wa.me/5585999999999?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            
            // Marcar data como reservada e limpar formul√°rio
            bookedDates.push(selectedDate);
            selectedDate = null;
            document.getElementById('agendaForm').reset();
            document.getElementById('selectedDate').style.display = 'none';
            generateCalendar();
            
            alert('Agendamento enviado! Voc√™ ser√° redirecionado para o WhatsApp.');
        }
        
        // Inicializar calend√°rio quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(generateCalendar, 100);
            
            // Listener para atualiza√ß√µes de calend√°rio
            window.addEventListener('storage', function(e) {
                if (e.key === 'calendarUpdate') {
                    setTimeout(generateCalendar, 100);
                }
            });
            
            // Garantir que a exibi√ß√£o de servi√ßos seja atualizada na inicializa√ß√£o
            setTimeout(updateServicesDisplay, 100);
        });
        
        // Fun√ß√µes para galeria de imagens
        function showGalleryModal() {
            // Criar o modal se n√£o existir
            if (!document.getElementById('galleryModal')) {
                const modal = document.createElement('div');
                modal.id = 'galleryModal';
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2 class="modal-title">üì∏ Fotos do Nosso Espa√ßo</h2>
                            <button class="close-btn" onclick="closeGalleryModal()">&times;</button>
                        </div>
                        <p style="text-align: center; color: #666; margin-bottom: 20px;">
                            Conhe√ßa nosso buffet atrav√©s destas fotos
                        </p>
                        <div class="gallery-grid" id="galleryGrid">
                            <!-- Imagens ser√£o carregadas aqui -->
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
            
            // Carregar imagens da galeria
            loadGalleryImages();
            
            // Mostrar o modal
            document.getElementById('galleryModal').style.display = 'flex';
        }
        
        function closeGalleryModal() {
            const modal = document.getElementById('galleryModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        function loadGalleryImages() {
            const galleryGrid = document.getElementById('galleryGrid');
            if (!galleryGrid) return;
            
            // Obter fotos do espa√ßo do localStorage
            const spacePhotos = JSON.parse(localStorage.getItem('spacePhotos') || '[]');
            
            if (spacePhotos.length === 0) {
                // Se n√£o houver fotos reais, mostrar placeholders
                const images = [
                    { id: 1, alt: "Sal√£o Principal do Buffet", icon: "üçΩÔ∏è" },
                    { id: 2, alt: "√Årea Externa com Jardim", icon: "üå≥" },
                    { id: 3, alt: "Cozinha Industrial", icon: "üë®‚Äçüç≥" },
                    { id: 4, alt: "√Årea Kids", icon: "üé†" },
                    { id: 5, alt: "Churrasqueira", icon: "üî•" },
                    { id: 6, alt: "Estacionamento", icon: "üöó" }
                ];
                
                galleryGrid.innerHTML = images.map(img => `
                    <div class="gallery-item placeholder" onclick="showImage(${img.id})">
                        <span style="font-size: 3rem;">${img.icon}</span>
                    </div>
                `).join('');
            } else {
                // Mostrar fotos reais
                galleryGrid.innerHTML = spacePhotos.map((photo, index) => `
                    <div class="gallery-item">
                        <img src="${photo.data}" alt="${photo.name}" onclick="showImage(${index})">
                    </div>
                `).join('');
            }
        }
        
        function showImage(imageIndex) {
            // Criar visualizador de imagem se n√£o existir
            if (!document.getElementById('imageViewer')) {
                const viewer = document.createElement('div');
                viewer.id = 'imageViewer';
                viewer.className = 'image-viewer';
                viewer.innerHTML = `
                    <button class="image-viewer-close" onclick="closeImageViewer()">&times;</button>
                    <button class="image-viewer-nav image-viewer-prev" onclick="prevImage()">&#8249;</button>
                    <div class="image-viewer-content">
                        <img id="viewerImage" src="" alt="">
                    </div>
                    <button class="image-viewer-nav image-viewer-next" onclick="nextImage()">&#8250;</button>
                `;
                document.body.appendChild(viewer);
            }
            
            // Obter fotos do espa√ßo do localStorage
            const spacePhotos = JSON.parse(localStorage.getItem('spacePhotos') || '[]');
            
            if (spacePhotos.length > 0 && imageIndex < spacePhotos.length) {
                // Mostrar foto real
                const photo = spacePhotos[imageIndex];
                document.getElementById('viewerImage').src = photo.data;
                document.getElementById('viewerImage').alt = photo.name;
                document.getElementById('imageViewer').style.display = 'flex';
                
                // Armazenar o √≠ndice atual para navega√ß√£o
                document.getElementById('imageViewer').setAttribute('data-current-index', imageIndex);
            } else {
                // Mostrar placeholder (para o caso de n√£o haver fotos reais)
                document.getElementById('viewerImage').src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%239c27b0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='24' fill='white'%3EImagem ${imageIndex + 1}%3C/text%3E%3C/svg%3E";
                document.getElementById('viewerImage').alt = "Imagem " + (imageIndex + 1);
                document.getElementById('imageViewer').style.display = 'flex';
                document.getElementById('imageViewer').setAttribute('data-current-index', imageIndex);
            }
        }
        
        function closeImageViewer() {
            const viewer = document.getElementById('imageViewer');
            if (viewer) {
                viewer.style.display = 'none';
            }
        }
        
        function prevImage() {
            const viewer = document.getElementById('imageViewer');
            const currentIndex = parseInt(viewer.getAttribute('data-current-index') || '0');
            const spacePhotos = JSON.parse(localStorage.getItem('spacePhotos') || '[]');
            const totalImages = spacePhotos.length > 0 ? spacePhotos.length : 6; // 6 placeholders padr√£o
            
            const prevIndex = currentIndex > 0 ? currentIndex - 1 : totalImages - 1;
            showImage(prevIndex);
        }
        
        function nextImage() {
            const viewer = document.getElementById('imageViewer');
            const currentIndex = parseInt(viewer.getAttribute('data-current-index') || '0');
            const spacePhotos = JSON.parse(localStorage.getItem('spacePhotos') || '[]');
            const totalImages = spacePhotos.length > 0 ? spacePhotos.length : 6; // 6 placeholders padr√£o
            
            const nextIndex = currentIndex < totalImages - 1 ? currentIndex + 1 : 0;
            showImage(nextIndex);
        }
        
        // Fun√ß√£o para c√¢mera ao vivo
        function showLiveCamera() {
            // Obter configura√ß√µes de streaming do localStorage
            const streamingConfig = localStorage.getItem('streamingConfig');
            let youtubeChannelId = 'UC_your_channel_id';
            let streamingEnabled = false;
            
            if (streamingConfig) {
                try {
                    const config = JSON.parse(streamingConfig);
                    youtubeChannelId = config.channelId || youtubeChannelId;
                    streamingEnabled = config.status === 'enabled';
                } catch (e) {
                    console.error('Erro ao carregar configura√ß√µes de streaming:', e);
                }
            }
            
            // Criar o modal se n√£o existir
            if (!document.getElementById('liveCameraModal')) {
                const modal = document.createElement('div');
                modal.id = 'liveCameraModal';
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="modal-header">
                            <h2 class="modal-title">üé• C√¢mera ao Vivo</h2>
                            <button class="close-btn" onclick="closeLiveCamera()">&times;</button>
                        </div>
                        <p style="text-align: center; color: #666; margin-bottom: 20px;">
                            Veja nosso buffet em tempo real
                        </p>
                        <div style="background: #000; border-radius: 8px; padding: 0; text-align: center; min-height: 300px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                            ${streamingEnabled ? 
                                `<iframe width="100%" height="315" src="https://www.youtube.com/embed/live_stream?channel=${youtubeChannelId}" frameborder="0" allowfullscreen style="border-radius: 8px 8px 0 0;"></iframe>` :
                                `<div style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 315px; width: 100%; background: #f5f5f5; color: #666;">
                                    <div style="font-size: 4rem; margin-bottom: 20px;">üìπ</div>
                                    <h3 style="color: #9c27b0; margin-bottom: 10px;">Streaming Indispon√≠vel</h3>
                                    <p style="color: #666; text-align: center; padding: 0 20px;">
                                        No momento, nossa c√¢mera ao vivo est√° temporariamente indispon√≠vel.<br>
                                        Confira nossas fotos do espa√ßo para conhecer nosso buffet!
                                    </p>
                                </div>`
                            }
                            <div style="padding: 15px; background: #f5f5f5; width: 100%; border-radius: 0 0 8px 8px;">
                                <h3 style="color: #9c27b0; margin-bottom: 10px;">Transmiss√£o ao Vivo</h3>
                                <p style="color: #666; margin-bottom: 0;">
                                    ${streamingEnabled ? 
                                        'Assista nossa transmiss√£o ao vivo 24 horas por dia e veja nosso buffet em tempo real!' :
                                        'No momento, nossa transmiss√£o ao vivo est√° temporariamente indispon√≠vel.'}
                                </p>
                            </div>
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196f3;">
                            <p style="margin: 0; color: #0d47a1; font-size: 0.9rem;">
                                <strong>‚ÑπÔ∏è Informa√ß√£o:</strong> Esta transmiss√£o ao vivo mostra o espa√ßo do nosso buffet em tempo real, 
                                permitindo que voc√™ veja o ambiente e a movimenta√ß√£o antes de agendar seu evento.
                            </p>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
            
            // Mostrar o modal
            document.getElementById('liveCameraModal').style.display = 'flex';
        }
        
        // Fun√ß√µes para v√≠deos em destaque
        function loadFeaturedVideos() {
            const videosContainer = document.getElementById('featuredVideosContainer');
            if (!videosContainer) return;
            
            const featuredVideos = JSON.parse(localStorage.getItem('featuredVideos') || '[]');
            
            if (featuredVideos.length === 0) {
                videosContainer.innerHTML = `
                    <p style="text-align: center; color: #666; padding: 40px 20px;">
                        Nenhum v√≠deo adicionado ainda. Volte mais tarde!
                    </p>
                `;
                return;
            }
            
            videosContainer.innerHTML = `
                <div class="services-grid">
                    ${featuredVideos.map(video => `
                        <div class="service-card">
                            <div style="position: relative; padding-top: 56.25%; border-radius: 12px 12px 0 0; overflow: hidden;">
                                <iframe 
                                    src="https://www.youtube.com/embed/${video.videoId}" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                    allowfullscreen 
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                                </iframe>
                            </div>
                            <div class="service-content">
                                <h3 class="service-title">${video.title}</h3>
                                <button class="btn-add" onclick="showVideoModal('${video.videoId}', '${video.title}')">
                                    Assistir em tela cheia
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // Fun√ß√µes para avalia√ß√µes
        function loadReviews() {
            const reviewsContainer = document.getElementById('reviewsContainer');
            if (!reviewsContainer) return;
            
            const reviews = JSON.parse(localStorage.getItem('reviews') || '[]');
            
            if (reviews.length === 0) {
                reviewsContainer.innerHTML = `
                    <p style="text-align: center; color: #666; padding: 40px 20px;">
                        Nenhuma avalia√ß√£o recebida ainda. Seja o primeiro a avaliar nosso buffet!
                    </p>
                `;
                return;
            }
            
            // Calcular m√©dia de estrelas
            const totalStars = reviews.reduce((sum, review) => sum + review.stars, 0);
            const averageStars = (totalStars / reviews.length).toFixed(1);
            
            // Ordenar avalia√ß√µes por data (mais recente primeiro)
            reviews.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            reviewsContainer.innerHTML = `
                <div style="background: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.5rem; color: #ffc107;">${'‚≠ê'.repeat(Math.floor(averageStars))}${'‚òÜ'.repeat(5 - Math.floor(averageStars))}</div>
                    <div>${averageStars}/5 (${reviews.length} avalia√ß√µes)</div>
                </div>
                
                ${reviews.map(review => {
                    // Converter n√∫mero de estrelas em √≠cones
                    const stars = '‚≠ê'.repeat(review.stars) + '‚òÜ'.repeat(5 - review.stars);
                    
                    return `
                        <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <strong>${review.name || 'Cliente'}</strong>
                                <span style="color: #999;">${new Date(review.date).toLocaleDateString('pt-BR')}</span>
                            </div>
                            <div style="color: #ffc107; margin-bottom: 10px;">
                                ${stars}
                            </div>
                            ${review.comment ? `<p>${review.comment}</p>` : ''}
                        </div>
                    `;
                }).join('')}
            `;
        }
        
        function showVideoModal(videoId, title) {
            // Criar o modal se n√£o existir
            if (!document.getElementById('videoModal')) {
                const modal = document.createElement('div');
                modal.id = 'videoModal';
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content" style="max-width: 800px; width: 90%;">
                        <div class="modal-header">
                            <h2 class="modal-title" id="videoModalTitle"></h2>
                            <button class="close-btn" onclick="closeVideoModal()">&times;</button>
                        </div>
                        <div style="position: relative; padding-top: 56.25%; border-radius: 8px; overflow: hidden;">
                            <iframe 
                                id="videoModalFrame"
                                src="" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen 
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                            </iframe>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
            }
            
            // Atualizar t√≠tulo e src do v√≠deo
            document.getElementById('videoModalTitle').textContent = title;
            document.getElementById('videoModalFrame').src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            
            // Mostrar o modal
            document.getElementById('videoModal').style.display = 'flex';
        }
        
        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            if (modal) {
                modal.style.display = 'none';
                // Pausar o v√≠deo quando fechar o modal
                document.getElementById('videoModalFrame').src = '';
            }
        }
        
        function closeLiveCamera() {
            const modal = document.getElementById('liveCameraModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Fun√ß√£o para processar avalia√ß√µes recebidas via WhatsApp
        function processReviewFromUrl() {
            // Esta fun√ß√£o seria chamada quando o usu√°rio volta do WhatsApp ap√≥s enviar uma avalia√ß√£o
            // Na pr√°tica, isso seria implementado com um webhook ou sistema de backend
            // Por enquanto, vamos simular a adi√ß√£o de uma avalia√ß√£o
            
            // Verificar se h√° par√¢metros de avalia√ß√£o na URL (simula√ß√£o)
            const urlParams = new URLSearchParams(window.location.search);
            const reviewStars = urlParams.get('review_stars');
            const reviewComment = urlParams.get('review_comment');
            const reviewerName = urlParams.get('reviewer_name') || 'Cliente';
            
            if (reviewStars) {
                // Criar objeto de avalia√ß√£o
                const review = {
                    id: 'review-' + Date.now(),
                    name: reviewerName,
                    stars: parseInt(reviewStars),
                    comment: reviewComment || '',
                    date: new Date().toISOString()
                };
                
                // Obter avalia√ß√µes existentes
                const reviews = JSON.parse(localStorage.getItem('reviews') || '[]');
                
                // Adicionar nova avalia√ß√£o
                reviews.push(review);
                
                // Salvar avalia√ß√µes atualizadas
                localStorage.setItem('reviews', JSON.stringify(reviews));
                
                // Mostrar mensagem de agradecimento
                alert('Obrigado pela sua avalia√ß√£o! Sua opini√£o √© muito importante para n√≥s.');
                
                // Remover par√¢metros da URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }
        
        // Processar avalia√ß√µes ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            processReviewFromUrl();
        });
        
        // Fechar modais ao clicar fora deles
        document.addEventListener('click', function(e) {
            const galleryModal = document.getElementById('galleryModal');
            const imageViewer = document.getElementById('imageViewer');
            const liveCameraModal = document.getElementById('liveCameraModal');
            const videoModal = document.getElementById('videoModal');
            
            if (galleryModal && e.target === galleryModal) {
                closeGalleryModal();
            }
            
            if (imageViewer && e.target === imageViewer) {
                closeImageViewer();
            }
            
            if (liveCameraModal && e.target === liveCameraModal) {
                closeLiveCamera();
            }
            
            if (videoModal && e.target === videoModal) {
                closeVideoModal();
            }
        });
        
        // Configura√ß√£o do Supabase
        const SUPABASE_URL = 'https://vopekxfyorbuyrvzcshy.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZvcGVreGZ5b3JidXlydnpjc2h5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NTkyNjMsImV4cCI6MjA3MzAzNTI2M30.jIQqu4j_0QfPpn67YXHyy760X6Z4wwhuHMj-xK3emP4';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Fun√ß√µes para carregar dados do Supabase
        async function loadServicesFromSupabase() {
            try {
                const { data, error } = await supabaseClient
                    .from('services')
                    .select('*')
                    .order('name');
                
                if (error) throw error;
                
                // Atualizar servi√ßos no localStorage
                const servicesData = {};
                data.forEach(service => {
                    servicesData[service.id] = {
                        price: service.price,
                        image: service.image_url
                    };
                });
                
                localStorage.setItem('servicesData', JSON.stringify(servicesData));
                
                // Recarregar servi√ßos na interface
                loadAdminData();
            } catch (error) {
                console.error('Erro ao carregar servi√ßos do Supabase:', error);
            }
        }
        
        async function loadReviewsFromSupabase() {
            try {
                const { data, error } = await supabaseClient
                    .from('reviews')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                // Atualizar avalia√ß√µes no localStorage
                localStorage.setItem('reviews', JSON.stringify(data));
                
                // Recarregar avalia√ß√µes na interface
                if (document.getElementById('avaliacoes').classList.contains('active')) {
                    loadReviews();
                }
            } catch (error) {
                console.error('Erro ao carregar avalia√ß√µes do Supabase:', error);
            }
        }
        
        async function loadSpacePhotosFromSupabase() {
            try {
                const { data, error } = await supabaseClient
                    .from('space_photos')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                // Atualizar fotos no localStorage
                localStorage.setItem('spacePhotos', JSON.stringify(data));
                
                // Recarregar fotos na interface
                if (document.getElementById('photosSection') && 
                    document.getElementById('photosSection').style.display !== 'none') {
                    loadSpacePhotos();
                }
            } catch (error) {
                console.error('Erro ao carregar fotos do espa√ßo do Supabase:', error);
            }
        }
        
        async function loadContactInfoFromSupabase() {
            try {
                const { data, error } = await supabaseClient
                    .from('contact_info')
                    .select('*')
                    .limit(1);
                
                if (error) throw error;
                
                if (data && data.length > 0) {
                    // Atualizar informa√ß√µes de contato no localStorage
                    localStorage.setItem('contactInfo', JSON.stringify(data[0]));
                    
                    // Recarregar informa√ß√µes na interface
                    loadContactInfo();
                }
            } catch (error) {
                console.error('Erro ao carregar informa√ß√µes de contato do Supabase:', error);
            }
        }
        
        // Carregar dados do Supabase quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar dados do Supabase ap√≥s um pequeno delay para garantir que o DOM esteja pronto
            setTimeout(async function() {
                await loadServicesFromSupabase();
                await loadReviewsFromSupabase();
                await loadSpacePhotosFromSupabase();
                await loadContactInfoFromSupabase();
            }, 2000);
        });
    </script>
    </script>\n</body>
</html>